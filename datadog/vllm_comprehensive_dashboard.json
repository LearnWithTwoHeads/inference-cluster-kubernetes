{
  "title": "vLLM Comprehensive Dashboard",
  "description": "Comprehensive monitoring dashboard for vLLM inference engine - includes latency, throughput, cache, and resource metrics",
  "widgets": [
    {
      "id": 1001,
      "definition": {
        "title": "Requests Running",
        "title_size": "16",
        "title_align": "left",
        "type": "query_value",
        "requests": [
          {
            "response_format": "scalar",
            "queries": [
              {
                "name": "query1",
                "data_source": "metrics",
                "query": "avg:vllm_num_requests_running{$cluster_name,$tenant,$model_name}",
                "aggregator": "last"
              }
            ],
            "formulas": [{ "formula": "query1" }]
          }
        ],
        "autoscale": true,
        "precision": 0
      },
      "layout": { "x": 0, "y": 0, "width": 3, "height": 2 }
    },
    {
      "id": 1002,
      "definition": {
        "title": "Requests Waiting",
        "title_size": "16",
        "title_align": "left",
        "type": "query_value",
        "requests": [
          {
            "response_format": "scalar",
            "queries": [
              {
                "name": "query1",
                "data_source": "metrics",
                "query": "avg:vllm_num_requests_waiting{$cluster_name,$tenant,$model_name}",
                "aggregator": "last"
              }
            ],
            "formulas": [{ "formula": "query1" }],
            "conditional_formats": [
              { "comparator": ">", "value": 10, "palette": "white_on_red" },
              { "comparator": ">", "value": 5, "palette": "white_on_yellow" },
              { "comparator": ">=", "value": 0, "palette": "white_on_green" }
            ]
          }
        ],
        "autoscale": true,
        "precision": 0
      },
      "layout": { "x": 3, "y": 0, "width": 3, "height": 2 }
    },
    {
      "id": 1003,
      "definition": {
        "title": "KV Cache Usage %",
        "title_size": "16",
        "title_align": "left",
        "type": "query_value",
        "requests": [
          {
            "response_format": "scalar",
            "queries": [
              {
                "name": "query1",
                "data_source": "metrics",
                "query": "avg:vllm_kv_cache_usage_perc{$cluster_name,$tenant,$model_name}",
                "aggregator": "last"
              }
            ],
            "formulas": [{ "formula": "query1 * 100" }],
            "conditional_formats": [
              { "comparator": ">", "value": 90, "palette": "white_on_red" },
              { "comparator": ">", "value": 70, "palette": "white_on_yellow" },
              { "comparator": ">=", "value": 0, "palette": "white_on_green" }
            ]
          }
        ],
        "autoscale": true,
        "precision": 1,
        "custom_unit": "%"
      },
      "layout": { "x": 6, "y": 0, "width": 3, "height": 2 }
    },
    {
      "id": 1004,
      "definition": {
        "title": "Successful Requests/sec",
        "title_size": "16",
        "title_align": "left",
        "type": "query_value",
        "requests": [
          {
            "response_format": "scalar",
            "queries": [
              {
                "name": "query1",
                "data_source": "metrics",
                "query": "sum:vllm_request_success.count{$cluster_name,$tenant,$model_name}.as_count()",
                "aggregator": "avg"
              }
            ],
            "formulas": [{ "formula": "per_second(query1)" }]
          }
        ],
        "autoscale": true,
        "precision": 2
      },
      "layout": { "x": 9, "y": 0, "width": 3, "height": 2 }
    },
    {
      "id": 2001,
      "definition": {
        "title": "Request Queue Depth Over Time",
        "title_size": "16",
        "title_align": "left",
        "show_legend": true,
        "legend_layout": "auto",
        "legend_columns": ["avg", "min", "max", "value", "sum"],
        "type": "timeseries",
        "requests": [
          {
            "response_format": "timeseries",
            "queries": [
              {
                "name": "running",
                "data_source": "metrics",
                "query": "avg:vllm_num_requests_running{$cluster_name,$tenant,$model_name}"
              },
              {
                "name": "waiting",
                "data_source": "metrics",
                "query": "avg:vllm_num_requests_waiting{$cluster_name,$tenant,$model_name}"
              }
            ],
            "formulas": [
              { "formula": "running", "alias": "Running" },
              { "formula": "waiting", "alias": "Waiting (Queue)" }
            ],
            "style": {
              "palette": "dog_classic",
              "order_by": "values",
              "line_type": "solid",
              "line_width": "normal"
            },
            "display_type": "area"
          }
        ]
      },
      "layout": { "x": 0, "y": 2, "width": 6, "height": 3 }
    },
    {
      "id": 2002,
      "definition": {
        "title": "KV Cache Usage Over Time",
        "title_size": "16",
        "title_align": "left",
        "show_legend": true,
        "legend_layout": "auto",
        "legend_columns": ["avg", "min", "max", "value", "sum"],
        "type": "timeseries",
        "requests": [
          {
            "response_format": "timeseries",
            "queries": [
              {
                "name": "query1",
                "data_source": "metrics",
                "query": "avg:vllm_kv_cache_usage_perc{$cluster_name,$tenant,$model_name}"
              }
            ],
            "formulas": [{ "formula": "query1 * 100", "alias": "KV Cache %" }],
            "style": {
              "palette": "warm",
              "order_by": "values",
              "line_type": "solid",
              "line_width": "normal"
            },
            "display_type": "line"
          }
        ],
        "yaxis": {
          "min": "0",
          "max": "100"
        },
        "markers": [
          {
            "value": "y = 90",
            "display_type": "error dashed",
            "label": "Critical"
          },
          {
            "value": "y = 70",
            "display_type": "warning dashed",
            "label": "Warning"
          }
        ]
      },
      "layout": { "x": 6, "y": 2, "width": 6, "height": 3 }
    },
    {
      "id": 3001,
      "definition": {
        "title": "Time to First Token (TTFT) - Latency Percentiles",
        "title_size": "16",
        "title_align": "left",
        "show_legend": true,
        "legend_layout": "auto",
        "legend_columns": ["avg", "min", "max", "value", "sum"],
        "type": "timeseries",
        "requests": [
          {
            "response_format": "timeseries",
            "queries": [
              {
                "name": "p99",
                "data_source": "metrics",
                "query": "p99:vllm_time_to_first_token_seconds{$cluster_name,$tenant,$model_name}"
              },
              {
                "name": "p95",
                "data_source": "metrics",
                "query": "p95:vllm_time_to_first_token_seconds{$cluster_name,$tenant,$model_name}"
              },
              {
                "name": "p50",
                "data_source": "metrics",
                "query": "p50:vllm_time_to_first_token_seconds{$cluster_name,$tenant,$model_name}"
              }
            ],
            "formulas": [
              { "formula": "p99", "alias": "p99" },
              { "formula": "p95", "alias": "p95" },
              { "formula": "p50", "alias": "p50 (median)" }
            ],
            "style": {
              "palette": "orange",
              "order_by": "values",
              "line_type": "solid",
              "line_width": "normal"
            },
            "display_type": "line"
          }
        ]
      },
      "layout": { "x": 0, "y": 5, "width": 6, "height": 3 }
    },
    {
      "id": 3002,
      "definition": {
        "title": "End-to-End Request Latency - Percentiles",
        "title_size": "16",
        "title_align": "left",
        "show_legend": true,
        "legend_layout": "auto",
        "legend_columns": ["avg", "min", "max", "value", "sum"],
        "type": "timeseries",
        "requests": [
          {
            "response_format": "timeseries",
            "queries": [
              {
                "name": "p99",
                "data_source": "metrics",
                "query": "p99:vllm_e2e_request_latency_seconds{$cluster_name,$tenant,$model_name}"
              },
              {
                "name": "p95",
                "data_source": "metrics",
                "query": "p95:vllm_e2e_request_latency_seconds{$cluster_name,$tenant,$model_name}"
              },
              {
                "name": "p50",
                "data_source": "metrics",
                "query": "p50:vllm_e2e_request_latency_seconds{$cluster_name,$tenant,$model_name}"
              }
            ],
            "formulas": [
              { "formula": "p99", "alias": "p99" },
              { "formula": "p95", "alias": "p95" },
              { "formula": "p50", "alias": "p50 (median)" }
            ],
            "style": {
              "palette": "purple",
              "order_by": "values",
              "line_type": "solid",
              "line_width": "normal"
            },
            "display_type": "line"
          }
        ]
      },
      "layout": { "x": 6, "y": 5, "width": 6, "height": 3 }
    },
    {
      "id": 3003,
      "definition": {
        "title": "Inter-Token Latency (ITL) - Streaming Performance",
        "title_size": "16",
        "title_align": "left",
        "show_legend": true,
        "legend_layout": "auto",
        "legend_columns": ["avg", "min", "max", "value", "sum"],
        "type": "timeseries",
        "requests": [
          {
            "response_format": "timeseries",
            "queries": [
              {
                "name": "p99",
                "data_source": "metrics",
                "query": "p99:vllm_inter_token_latency_seconds{$cluster_name,$tenant,$model_name}"
              },
              {
                "name": "p95",
                "data_source": "metrics",
                "query": "p95:vllm_inter_token_latency_seconds{$cluster_name,$tenant,$model_name}"
              },
              {
                "name": "p50",
                "data_source": "metrics",
                "query": "p50:vllm_inter_token_latency_seconds{$cluster_name,$tenant,$model_name}"
              }
            ],
            "formulas": [
              { "formula": "p99", "alias": "p99" },
              { "formula": "p95", "alias": "p95" },
              { "formula": "p50", "alias": "p50 (median)" }
            ],
            "style": {
              "palette": "cool",
              "order_by": "values",
              "line_type": "solid",
              "line_width": "normal"
            },
            "display_type": "line"
          }
        ]
      },
      "layout": { "x": 0, "y": 8, "width": 6, "height": 3 }
    },
    {
      "id": 3004,
      "definition": {
        "title": "Time Per Output Token",
        "title_size": "16",
        "title_align": "left",
        "show_legend": true,
        "legend_layout": "auto",
        "legend_columns": ["avg", "min", "max", "value", "sum"],
        "type": "timeseries",
        "requests": [
          {
            "response_format": "timeseries",
            "queries": [
              {
                "name": "p99",
                "data_source": "metrics",
                "query": "p99:vllm_request_time_per_output_token_seconds{$cluster_name,$tenant,$model_name}"
              },
              {
                "name": "p95",
                "data_source": "metrics",
                "query": "p95:vllm_request_time_per_output_token_seconds{$cluster_name,$tenant,$model_name}"
              },
              {
                "name": "p50",
                "data_source": "metrics",
                "query": "p50:vllm_request_time_per_output_token_seconds{$cluster_name,$tenant,$model_name}"
              }
            ],
            "formulas": [
              { "formula": "p99", "alias": "p99" },
              { "formula": "p95", "alias": "p95" },
              { "formula": "p50", "alias": "p50 (median)" }
            ],
            "style": {
              "palette": "green",
              "order_by": "values",
              "line_type": "solid",
              "line_width": "normal"
            },
            "display_type": "line"
          }
        ]
      },
      "layout": { "x": 6, "y": 8, "width": 6, "height": 3 }
    },
    {
      "id": 4001,
      "definition": {
        "title": "Request Lifecycle Breakdown (p50)",
        "title_size": "16",
        "title_align": "left",
        "show_legend": true,
        "legend_layout": "auto",
        "legend_columns": ["avg", "min", "max", "value", "sum"],
        "type": "timeseries",
        "requests": [
          {
            "response_format": "timeseries",
            "queries": [
              {
                "name": "queue",
                "data_source": "metrics",
                "query": "p50:vllm_request_queue_time_seconds{$cluster_name,$tenant,$model_name}"
              },
              {
                "name": "prefill",
                "data_source": "metrics",
                "query": "p50:vllm_request_prefill_time_seconds{$cluster_name,$tenant,$model_name}"
              },
              {
                "name": "decode",
                "data_source": "metrics",
                "query": "p50:vllm_request_decode_time_seconds{$cluster_name,$tenant,$model_name}"
              }
            ],
            "formulas": [
              { "formula": "queue", "alias": "Queue Time" },
              { "formula": "prefill", "alias": "Prefill Time" },
              { "formula": "decode", "alias": "Decode Time" }
            ],
            "style": {
              "palette": "semantic",
              "order_by": "values",
              "line_type": "solid",
              "line_width": "normal"
            },
            "display_type": "area"
          }
        ]
      },
      "layout": { "x": 0, "y": 11, "width": 6, "height": 3 }
    },
    {
      "id": 4002,
      "definition": {
        "title": "Queue Time Distribution",
        "title_size": "16",
        "title_align": "left",
        "show_legend": true,
        "legend_layout": "auto",
        "legend_columns": ["avg", "min", "max", "value", "sum"],
        "type": "timeseries",
        "requests": [
          {
            "response_format": "timeseries",
            "queries": [
              {
                "name": "p99",
                "data_source": "metrics",
                "query": "p99:vllm_request_queue_time_seconds{$cluster_name,$tenant,$model_name}"
              },
              {
                "name": "p95",
                "data_source": "metrics",
                "query": "p95:vllm_request_queue_time_seconds{$cluster_name,$tenant,$model_name}"
              },
              {
                "name": "p50",
                "data_source": "metrics",
                "query": "p50:vllm_request_queue_time_seconds{$cluster_name,$tenant,$model_name}"
              }
            ],
            "formulas": [
              { "formula": "p99", "alias": "p99" },
              { "formula": "p95", "alias": "p95" },
              { "formula": "p50", "alias": "p50" }
            ],
            "style": {
              "palette": "warm",
              "order_by": "values",
              "line_type": "solid",
              "line_width": "normal"
            },
            "display_type": "line"
          }
        ]
      },
      "layout": { "x": 6, "y": 11, "width": 6, "height": 3 }
    },
    {
      "id": 5001,
      "definition": {
        "title": "Token Throughput - Generation vs Prompt",
        "title_size": "16",
        "title_align": "left",
        "show_legend": true,
        "legend_layout": "auto",
        "legend_columns": ["avg", "min", "max", "value", "sum"],
        "type": "timeseries",
        "requests": [
          {
            "response_format": "timeseries",
            "queries": [
              {
                "name": "gen",
                "data_source": "metrics",
                "query": "sum:vllm_generation_tokens.count{$cluster_name,$tenant,$model_name}.as_count()"
              },
              {
                "name": "prompt",
                "data_source": "metrics",
                "query": "sum:vllm_prompt_tokens.count{$cluster_name,$tenant,$model_name}.as_count()"
              }
            ],
            "formulas": [
              { "formula": "per_second(gen)", "alias": "Generated Tokens/s" },
              { "formula": "per_second(prompt)", "alias": "Prompt Tokens/s" }
            ],
            "style": {
              "palette": "dog_classic",
              "order_by": "values",
              "line_type": "solid",
              "line_width": "normal"
            },
            "display_type": "line"
          }
        ]
      },
      "layout": { "x": 0, "y": 14, "width": 6, "height": 3 }
    },
    {
      "id": 5002,
      "definition": {
        "title": "Request Success Rate",
        "title_size": "16",
        "title_align": "left",
        "show_legend": true,
        "legend_layout": "auto",
        "legend_columns": ["avg", "min", "max", "value", "sum"],
        "type": "timeseries",
        "requests": [
          {
            "response_format": "timeseries",
            "queries": [
              {
                "name": "query1",
                "data_source": "metrics",
                "query": "sum:vllm_request_success.count{$cluster_name,$tenant,$model_name}.as_count()"
              }
            ],
            "formulas": [{ "formula": "per_second(query1)", "alias": "Successful Requests/s" }],
            "style": {
              "palette": "green",
              "order_by": "values",
              "line_type": "solid",
              "line_width": "normal"
            },
            "display_type": "bars"
          }
        ]
      },
      "layout": { "x": 6, "y": 14, "width": 6, "height": 3 }
    },
    {
      "id": 5003,
      "definition": {
        "title": "Total Tokens Processed (Generation + Prompt)",
        "title_size": "16",
        "title_align": "left",
        "show_legend": true,
        "legend_layout": "auto",
        "legend_columns": ["avg", "min", "max", "value", "sum"],
        "type": "timeseries",
        "requests": [
          {
            "response_format": "timeseries",
            "queries": [
              {
                "name": "gen",
                "data_source": "metrics",
                "query": "sum:vllm_generation_tokens.count{$cluster_name,$tenant,$model_name}.as_count()"
              },
              {
                "name": "prompt",
                "data_source": "metrics",
                "query": "sum:vllm_prompt_tokens.count{$cluster_name,$tenant,$model_name}.as_count()"
              }
            ],
            "formulas": [{ "formula": "per_second(gen + prompt)", "alias": "Total Tokens/s" }],
            "style": {
              "palette": "purple",
              "order_by": "values",
              "line_type": "solid",
              "line_width": "normal"
            },
            "display_type": "area"
          }
        ]
      },
      "layout": { "x": 0, "y": 17, "width": 12, "height": 3 }
    },
    {
      "id": 6001,
      "definition": {
        "title": "Prefix Cache Hit Rate",
        "title_size": "16",
        "title_align": "left",
        "show_legend": true,
        "legend_layout": "auto",
        "legend_columns": ["avg", "min", "max", "value", "sum"],
        "type": "timeseries",
        "requests": [
          {
            "response_format": "timeseries",
            "queries": [
              {
                "name": "hits",
                "data_source": "metrics",
                "query": "sum:vllm_prefix_cache_hits.count{$cluster_name,$tenant,$model_name}.as_count()"
              },
              {
                "name": "queries",
                "data_source": "metrics",
                "query": "sum:vllm_prefix_cache_queries.count{$cluster_name,$tenant,$model_name}.as_count()"
              }
            ],
            "formulas": [{ "formula": "hits / queries * 100", "alias": "Hit Rate %" }],
            "style": {
              "palette": "green",
              "order_by": "values",
              "line_type": "solid",
              "line_width": "normal"
            },
            "display_type": "line"
          }
        ],
        "yaxis": {
          "min": "0",
          "max": "100"
        }
      },
      "layout": { "x": 0, "y": 20, "width": 4, "height": 3 }
    },
    {
      "id": 6002,
      "definition": {
        "title": "External Prefix Cache Hit Rate",
        "title_size": "16",
        "title_align": "left",
        "show_legend": true,
        "legend_layout": "auto",
        "legend_columns": ["avg", "min", "max", "value", "sum"],
        "type": "timeseries",
        "requests": [
          {
            "response_format": "timeseries",
            "queries": [
              {
                "name": "hits",
                "data_source": "metrics",
                "query": "sum:vllm_external_prefix_cache_hits.count{$cluster_name,$tenant,$model_name}.as_count()"
              },
              {
                "name": "queries",
                "data_source": "metrics",
                "query": "sum:vllm_external_prefix_cache_queries.count{$cluster_name,$tenant,$model_name}.as_count()"
              }
            ],
            "formulas": [{ "formula": "hits / queries * 100", "alias": "Hit Rate %" }],
            "style": {
              "palette": "cool",
              "order_by": "values",
              "line_type": "solid",
              "line_width": "normal"
            },
            "display_type": "line"
          }
        ],
        "yaxis": {
          "min": "0",
          "max": "100"
        }
      },
      "layout": { "x": 4, "y": 20, "width": 4, "height": 3 }
    },
    {
      "id": 6003,
      "definition": {
        "title": "Multimodal Cache Hit Rate",
        "title_size": "16",
        "title_align": "left",
        "show_legend": true,
        "legend_layout": "auto",
        "legend_columns": ["avg", "min", "max", "value", "sum"],
        "type": "timeseries",
        "requests": [
          {
            "response_format": "timeseries",
            "queries": [
              {
                "name": "hits",
                "data_source": "metrics",
                "query": "sum:vllm_mm_cache_hits.count{$cluster_name,$tenant,$model_name}.as_count()"
              },
              {
                "name": "queries",
                "data_source": "metrics",
                "query": "sum:vllm_mm_cache_queries.count{$cluster_name,$tenant,$model_name}.as_count()"
              }
            ],
            "formulas": [{ "formula": "hits / queries * 100", "alias": "Hit Rate %" }],
            "style": {
              "palette": "orange",
              "order_by": "values",
              "line_type": "solid",
              "line_width": "normal"
            },
            "display_type": "line"
          }
        ],
        "yaxis": {
          "min": "0",
          "max": "100"
        }
      },
      "layout": { "x": 8, "y": 20, "width": 4, "height": 3 }
    },
    {
      "id": 7001,
      "definition": {
        "title": "Preemptions (Scheduling Disruptions)",
        "title_size": "16",
        "title_align": "left",
        "show_legend": true,
        "legend_layout": "auto",
        "legend_columns": ["avg", "min", "max", "value", "sum"],
        "type": "timeseries",
        "requests": [
          {
            "response_format": "timeseries",
            "queries": [
              {
                "name": "query1",
                "data_source": "metrics",
                "query": "sum:vllm_num_preemptions.count{$cluster_name,$tenant,$model_name}.as_count()"
              }
            ],
            "formulas": [{ "formula": "per_second(query1)", "alias": "Preemptions/s" }],
            "style": {
              "palette": "warm",
              "order_by": "values",
              "line_type": "solid",
              "line_width": "normal"
            },
            "display_type": "bars"
          }
        ]
      },
      "layout": { "x": 0, "y": 23, "width": 6, "height": 3 }
    },
    {
      "id": 7002,
      "definition": {
        "title": "Engine Sleep State",
        "title_size": "16",
        "title_align": "left",
        "show_legend": true,
        "legend_layout": "auto",
        "legend_columns": ["avg", "min", "max", "value", "sum"],
        "type": "timeseries",
        "requests": [
          {
            "response_format": "timeseries",
            "queries": [
              {
                "name": "query1",
                "data_source": "metrics",
                "query": "avg:vllm_engine_sleep_state{$cluster_name,$tenant,$model_name}"
              }
            ],
            "formulas": [{ "formula": "query1", "alias": "Sleep State (0=awake, 1=sleeping)" }],
            "style": {
              "palette": "grey",
              "order_by": "values",
              "line_type": "solid",
              "line_width": "normal"
            },
            "display_type": "area"
          }
        ],
        "yaxis": {
          "min": "0",
          "max": "1"
        }
      },
      "layout": { "x": 6, "y": 23, "width": 6, "height": 3 }
    },
    {
      "id": 8001,
      "definition": {
        "title": "Request Token Distribution (p50)",
        "title_size": "16",
        "title_align": "left",
        "show_legend": true,
        "legend_layout": "auto",
        "legend_columns": ["avg", "min", "max", "value", "sum"],
        "type": "timeseries",
        "requests": [
          {
            "response_format": "timeseries",
            "queries": [
              {
                "name": "prompt",
                "data_source": "metrics",
                "query": "p50:vllm_request_prompt_tokens{$cluster_name,$tenant,$model_name}"
              },
              {
                "name": "gen",
                "data_source": "metrics",
                "query": "p50:vllm_request_generation_tokens{$cluster_name,$tenant,$model_name}"
              }
            ],
            "formulas": [
              { "formula": "prompt", "alias": "Prompt Tokens (p50)" },
              { "formula": "gen", "alias": "Generated Tokens (p50)" }
            ],
            "style": {
              "palette": "dog_classic",
              "order_by": "values",
              "line_type": "solid",
              "line_width": "normal"
            },
            "display_type": "line"
          }
        ]
      },
      "layout": { "x": 0, "y": 26, "width": 6, "height": 3 }
    },
    {
      "id": 8002,
      "definition": {
        "title": "Max Generation Tokens Requested",
        "title_size": "16",
        "title_align": "left",
        "show_legend": true,
        "legend_layout": "auto",
        "legend_columns": ["avg", "min", "max", "value", "sum"],
        "type": "timeseries",
        "requests": [
          {
            "response_format": "timeseries",
            "queries": [
              {
                "name": "p99",
                "data_source": "metrics",
                "query": "p99:vllm_request_max_num_generation_tokens{$cluster_name,$tenant,$model_name}"
              },
              {
                "name": "p50",
                "data_source": "metrics",
                "query": "p50:vllm_request_max_num_generation_tokens{$cluster_name,$tenant,$model_name}"
              }
            ],
            "formulas": [
              { "formula": "p99", "alias": "p99" },
              { "formula": "p50", "alias": "p50" }
            ],
            "style": {
              "palette": "purple",
              "order_by": "values",
              "line_type": "solid",
              "line_width": "normal"
            },
            "display_type": "line"
          }
        ]
      },
      "layout": { "x": 6, "y": 26, "width": 6, "height": 3 }
    },
    {
      "id": 9001,
      "definition": {
        "title": "Request Parameters - max_tokens",
        "title_size": "16",
        "title_align": "left",
        "show_legend": true,
        "legend_layout": "auto",
        "legend_columns": ["avg", "min", "max", "value", "sum"],
        "type": "timeseries",
        "requests": [
          {
            "response_format": "timeseries",
            "queries": [
              {
                "name": "p99",
                "data_source": "metrics",
                "query": "p99:vllm_request_params_max_tokens{$cluster_name,$tenant,$model_name}"
              },
              {
                "name": "p50",
                "data_source": "metrics",
                "query": "p50:vllm_request_params_max_tokens{$cluster_name,$tenant,$model_name}"
              },
              {
                "name": "avg",
                "data_source": "metrics",
                "query": "avg:vllm_request_params_max_tokens{$cluster_name,$tenant,$model_name}"
              }
            ],
            "formulas": [
              { "formula": "p99", "alias": "p99" },
              { "formula": "p50", "alias": "p50" },
              { "formula": "avg", "alias": "avg" }
            ],
            "style": {
              "palette": "cool",
              "order_by": "values",
              "line_type": "solid",
              "line_width": "normal"
            },
            "display_type": "line"
          }
        ]
      },
      "layout": { "x": 0, "y": 29, "width": 6, "height": 3 }
    },
    {
      "id": 9002,
      "definition": {
        "title": "Request Parameters - n (beam width)",
        "title_size": "16",
        "title_align": "left",
        "show_legend": true,
        "legend_layout": "auto",
        "legend_columns": ["avg", "min", "max", "value", "sum"],
        "type": "timeseries",
        "requests": [
          {
            "response_format": "timeseries",
            "queries": [
              {
                "name": "query1",
                "data_source": "metrics",
                "query": "avg:vllm_request_params_n{$cluster_name,$tenant,$model_name}"
              }
            ],
            "formulas": [{ "formula": "query1", "alias": "avg n parameter" }],
            "style": {
              "palette": "green",
              "order_by": "values",
              "line_type": "solid",
              "line_width": "normal"
            },
            "display_type": "line"
          }
        ]
      },
      "layout": { "x": 6, "y": 29, "width": 6, "height": 3 }
    },
    {
      "id": 10001,
      "definition": {
        "title": "Inference Time vs Decode Time (p95)",
        "title_size": "16",
        "title_align": "left",
        "show_legend": true,
        "legend_layout": "auto",
        "legend_columns": ["avg", "min", "max", "value", "sum"],
        "type": "timeseries",
        "requests": [
          {
            "response_format": "timeseries",
            "queries": [
              {
                "name": "inference",
                "data_source": "metrics",
                "query": "p95:vllm_request_inference_time_seconds{$cluster_name,$tenant,$model_name}"
              },
              {
                "name": "decode",
                "data_source": "metrics",
                "query": "p95:vllm_request_decode_time_seconds{$cluster_name,$tenant,$model_name}"
              },
              {
                "name": "prefill",
                "data_source": "metrics",
                "query": "p95:vllm_request_prefill_time_seconds{$cluster_name,$tenant,$model_name}"
              }
            ],
            "formulas": [
              { "formula": "inference", "alias": "Total Inference Time" },
              { "formula": "decode", "alias": "Decode Time" },
              { "formula": "prefill", "alias": "Prefill Time" }
            ],
            "style": {
              "palette": "dog_classic",
              "order_by": "values",
              "line_type": "solid",
              "line_width": "normal"
            },
            "display_type": "line"
          }
        ]
      },
      "layout": { "x": 0, "y": 32, "width": 12, "height": 3 }
    }
  ],
  "template_variables": [
    {
      "name": "cluster_name",
      "available_values": ["cluster_name:inference-cluster"],
      "default": "cluster_name:inference-cluster"
    },
    {
      "name": "model_name",
      "prefix": "model_name",
      "available_values": [],
      "default": "*"
    },
    {
      "name": "tenant",
      "prefix": "tenant",
      "available_values": [],
      "default": "*"
    }
  ],
  "layout_type": "ordered",
  "notify_list": [],
  "reflow_type": "fixed",
  "pause_auto_refresh": false
}
